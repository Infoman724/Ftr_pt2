<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Work</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <h2>My Work Information</h2>

    <div id="employeeInfo">
      <!-- Место для отображения информации о сотруднике -->
    </div>

    <div id="fixedWorkingHours">
      <h3>Fixed Working Hours</h3>
      <!-- Место для отображения фиксированных рабочих часов -->
    </div>

    <div id="editPersonalData">
      <h3>Edit Personal Data</h3>
      <!-- Форма для редактирования личных данных -->
      <form id="editPersonalDataForm">
        <!-- Поля для редактирования данных -->
        <button type="button" onclick="updatePersonalData()">Update Personal Data</button>
      </form>
    </div>

    <div id="addWorkingTime">
      <h3>Add Working Time</h3>
      <!-- Форма для добавления нового времени работы -->
      <form id="addWorkingTimeForm">
        <!-- Поля для ввода нового времени работы -->
        <button type="button" onclick="addWorkingTime()">Add Working Time</button>
      </form>
    </div>
  </div>

  <script>
    // Получение информации о сотруднике при загрузке страницы
    document.addEventListener('DOMContentLoaded', function () {
      getEmployeeInfo();
      getFixedWorkingHours();
    });

    function getEmployeeInfo() {
      // Используйте сохраненные данные о сотруднике из localStorage
      var employeeId = localStorage.getItem('employeeId');

      // Запрос на сервер для получения информации о сотруднике
      fetch(`https://localhost:7263/api/employee/${employeeId}`)
        .then(response => response.json())
        .then(data => {
          // Отобразить информацию о сотруднике на странице
          displayEmployeeInfo(data);
        })
        .catch(error => console.error('Error fetching employee info:', error));
    }

    function displayEmployeeInfo(employee) {
      var employeeInfoDiv = document.getElementById('employeeInfo');
      // Отображение информации о сотруднике (подставьте свои поля)
      employeeInfoDiv.innerHTML = `
        <p>Employee ID: ${employee.employeeId}</p>
        <p>Name: ${employee.firstName} ${employee.lastName}</p>
        <p>Email: ${employee.email}</p>
        <!-- Добавьте другие поля по необходимости -->
      `;
    }

    function getFixedWorkingHours() {
      // Используйте сохраненные данные о сотруднике из localStorage
      var employeeId = localStorage.getItem('employeeId');

      // Запрос на сервер для получения фиксированных рабочих часов
      fetch(`https://localhost:7263/api/employee/fixedhours/${employeeId}`)
        .then(response => response.json())
        .then(data => {
          // Отобразить фиксированные рабочие часы на странице
          displayFixedWorkingHours(data);
        })
        .catch(error => console.error('Error fetching fixed working hours:', error));
    }

    function displayFixedWorkingHours(fixedHours) {
      var fixedWorkingHoursDiv = document.getElementById('fixedWorkingHours');
      // Отображение фиксированных рабочих часов (подставьте свои поля)
      fixedWorkingHoursDiv.innerHTML = `
        <p>Start Time: ${fixedHours.startTime}</p>
        <p>End Time: ${fixedHours.endTime}</p>
        <!-- Добавьте другие поля по необходимости -->
      `;
    }

    function updatePersonalData() {
      // Логика для отправки запроса на обновление личных данных
      // Используйте данные из формы и отправьте запрос на сервер
      // Обновите соответствующий эндпоинт для обновления личных данных
    }

    function addWorkingTime() {
      // Логика для отправки запроса на добавление нового времени работы
      // Используйте данные из формы и отправьте запрос на сервер
      // Обновите соответствующий эндпоинт для добавления времени работы
    }
  </script>
</body>
</html>
